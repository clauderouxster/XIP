
function find_grm(string path) {
    svector vs = < x | x <- _sys.ls(path), x[0] != ".">;
    string fichier;
    for (string p in vs) {
        fichier = path + p;
        if (_sys.isdirectory(fichier)) {
            find_grm(fichier+"/");
        }
        elif (".grm" in p) {
            string texte;
            texte.read(fichier);
            string nom = texte["gram":".xip"][-"/":][1:].trim();
            if (nom != "") {
                try {
                    texte.read(path+nom);
                    if ("Expiration" in texte) {
                        println("xipkey "+path+nom);
                        _sys.command("xipkey "+path+nom);
                    }
                }
                catch;
            }
        }
    }
}


find_grm(_current);

