//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
//! Xerox Research Centre Europe - Grenoble Laboratory
//!
//! Copyright (c) 2006 Xerox Corporation.  All Rights Reserved.
//!
//! --- CONTENTS ---
//!   Project    : english grammar for political risk detection
//!   filename   : dependency_source-factuality_pr.xip
//!   Date       : October 2006
//!   Author     : Aude Rebotier, Ãgnes SÃ¡ndor
//!  
//!
//!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!


DependencyRules:



// on caractérise chaque relation CORE-DRIVE ou CORE-ANNEX selon le rapport entre la source et la factualité des deux COREs qu'elle associe :
// - pas de trait (cas par défaut) : le CORE emboîté est possible ; il a la même source que le CORE emboîtant
// - factual : le CORE emboîté est factuel ; il a la même source que le CORE emboîtant
// - counter-factual : le CORE emboîté est contre-factuel ; il a la même source que le CORE emboîtant
// - facttrans : le CORE emboîté a la même factualité et la même source que le CORE emboîtant

// - say : si le CORE emboîtant est factuel, le CORE emboîté est factuel et il a pour source l'acteur du CORE emboîtant ; sinon, le CORE emboîté est possible et il a la même source que le CORE emboîtant (= cas par défaut)
// - deny : si le CORE emboîtant est factuel, le CORE emboîté est countre-factuel et il a pour source l'acteur du CORE emboîtant ; sinon, le CORE emboîté est possible et il a la même source que le CORE emboîtant (= cas par défaut)

if (^CORE-DRIVE(#1,#2) & ARGUMENT[subj](#1[say],#2[say]))
	CORE-DRIVE[identical=+](#1,#2)

if (^CORE-ATT[neg](#2,#1) & CORE-NOUN(#1) & (ARGUMENT[subj](#3,#1) | ARGUMENT[obj](#3,#1)))
	CORE-ATT[neg=+](#2,#3)


// Chaque noyau ne doit avoir qu'un driver (CORE-DRIVE ou -ANNEX) ; si ce n'est  pas le cas (problÃ¨me en amont dans la grammaire), ces rÃ¨gles permet d'attribuer une factualité sans résoudre le problÃ¨me.
if (CORE-DRIVE[second:~, identical:~](#1,#2) & ^CORE-DRIVE[second:~, identical:~](#3,#2) )
	CORE-DRIVE[second=+](#3,#2)

if (CORE-DRIVE[second:~, identical:~](#1,#2) & ^CORE-ANNEX[second:~, identical:~](#3,#2))
	CORE-DRIVE[second=+](#3,#2)

if (CORE-ANNEX[second:~, identical:~](#1,#2) & ^CORE-ANNEX[second:~, identical:~](#3,#2))
	CORE-ANNEX[second=+](#3,#2)


// 1. caractérisation des relations CORE-DRIVE et ANNEX selon la source et la factualité des deux COREs

// 1.0 COREs qui auront toujours la même source et la même factualité que leur driver : événements coréférents
// ajout d'une dépendance CORE-DRIVE qui ignore les événements coréférents (attributs du sujet, verbes supports)
// are afraid of threats

//if (CORE-DRIVE[identical](#1,#2) & CORE-DRIVE(#2,#3))
//	CORE-DRIVE(#1,#3)

// deux événements identiques ont les mêmes CORE-ATT
if ((CORE-DRIVE[identical](#1,#2)| CORE-ANNEX[identical](#1,#2)) & CORE-ATT[modal](#3,#2))
	CORE-ATT[modal=+](#3,#1)

if ((CORE-DRIVE[identical](#1,#2)| CORE-ANNEX[identical](#1,#2)) & CORE-ATT[neg](#3,#2))
	CORE-ATT[neg=+](#3,#1)

// 1.1.COREs qui seront factuels si leur driver l'est

// 1.1a événements dépendant directement de verbes de parole
if (^CORE-DRIVE(#1[say, deny:~],#2) & ~ARGUMENT[subj](#1,#2))
	CORE-DRIVE[say=+](#1,#2)


// 1.1b avec la même source que leur driver

// sujet d'un verbe (sauf si le prédicat verbal exprime une modalité)
if (CORE-NOUN(#1) & ^CORE-DRIVE[identical:~](#2[presupp:~],#1) & ARGUMENT[subj](#2,#1) & ~SUBJATTR(#1,?[modaladj]) & ~SUBJATTR(#1,?[modalnoun]))
	CORE-DRIVE[facttrans=+](#2,#1)

// compléments de verbes de phase
if (^CORE-DRIVE[identical:~](#2[phase, presupp:~],#1))
	CORE-DRIVE[facttrans=+](#2,#1)

// objets définis
if (CORE-NOUN(#1) & (DETD(#1,#4[def]) | NMODGEN(#1,?)) & ^CORE-DRIVE[identical:~](#2[say:~, deny:~],#1) & ARGUMENT[obj](#2,#1))
	CORE-DRIVE[facttrans=+](#2,#1)

//over Russian insistence : factuel
if( ^CORE-ANNEX[identical:~](#1,#2) & ~SRC(#2,?) & PREPD(#2,?[p_over]))
	CORE-ANNEX[facttrans=+](#1,#2)

// gérondifs
if (^CORE-ANNEX[ger](#1,#2) & CORE(#2))
	CORE-ANNEX[facttrans=+](#1,#2)

if( ^CORE-ANNEX[temp, logic:~](#1,#2) & ~PAST(#2))
	CORE-ANNEX[facttrans=+](#1,#2)

// 1.2 CORE qui seront contre-factuels si leur driver est factuel
// événement dépendant directement d'un événement d'énonciation (type deny)
if (^CORE-DRIVE(#1[lemme:deny],#2) & ~CORE-NOUN(#2))
		CORE-DRIVE[deny=+](#1,#2)

// 1.3 CORE qui seront factuels quelle que soit la factualité de leur driver (avec transmission de la source)
// relatives (Ã  affiner)
if( ^CORE-ANNEX[rel](#1,#2))
	CORE-ANNEX[factual=+](#1,#2)

// to know
if (^CORE-DRIVE(#1[lemme:know],#2))
	CORE-DRIVE[factual=+, facttrans=~](#1,#2)

// subordonnées temporelles quand elles ne réfÃ¨rent pas Ã  l'avenir
if( ^CORE-ANNEX[temp, logic:~](#1,#2) & PAST(#2))
	CORE-ANNEX[factual=+](#1,#2)

// subordonnées logiques ou argumentatives (because, although)
if( ^CORE-ANNEX[logic](#1,#2))
	CORE-ANNEX[factual=+](#1,#2)


// verbes de phase qui impliquent un présupposé (continue doing : doing a déjÃ  commencé)
if (^CORE-DRIVE(#1[presupp:fact],#2))
	CORE-DRIVE[factual=+, facttrans=~](#1,#2)


//1.4 relations CORE-DRIVE qui ne seront prises en compte que dans un deuxiÃ¨me temps car elles portent sur un CORE qui est le 2nd élément de plusieurs relations CORE-DRIVE ou -ANNEX
if (^CORE-DRIVE[rel](#1,#2) | ^CORE-DRIVE[ger](#1,#2))
	CORE-DRIVE[second=+](#1,#2)

// 2. correction par la négation et la modalité attachée
//négation
if (^CORE-DRIVE(#1,#2) & MOD[neg](#2,?))
	CORE-DRIVE(#1,#2)

if (^CORE-DRIVE[facttrans, identical:~](#1,#2) & CORE-ATT[neg](?,#2) )
	CORE-DRIVE[facttrans=~](#1,#2)

if (^CORE-ANNEX[facttrans, identical:~](#1,#2) & CORE-ATT[neg](?,#2) )
	CORE-ANNEX[facttrans=~](#1,#2)

if (^CORE-DRIVE[say](#1,#2) & CORE-ATT[neg](?,#2) )
	CORE-DRIVE[say=~, deny=+](#1,#2)

if (^CORE-DRIVE[factual](#1,#2) & CORE-ATT[neg](?,#2) )
	CORE-DRIVE[factual=~, counter-factual=+](#1,#2)

if (^CORE-ANNEX[factual](#1,#2) & CORE-ATT[neg](?,#2))
	CORE-ANNEX[factual=~, counter-factual=+](#1,#2)


//temporalité des noms
if (CORE-NOUN(#1) & MOD(#1,#2[lemme:current]) & ^CORE-DRIVE(#5,#1))
	CORE-DRIVE[facttrans=~, counter-factual=~, possible=~, factual=+](#5,#1)
if (CORE-NOUN(#1) & MOD(#1,#2[lemme:current]) & ^CORE-ANNEX(#5,#1))
	CORE-ANNEX[facttrans=~, counter-factual=~, possible=~, factual=+](#5,#1)
if (CORE-NOUN(#1) & MOD(#1,#2[lemme:future]) & ^CORE-DRIVE(#5,#1) )
	CORE-DRIVE[facttrans=~, counter-factual=~, possible=+, factual=~](#5,#1) 
if (CORE-NOUN(#1) & MOD(#1,#2[lemme:future]) & ^CORE-ANNEX(#5,#1) )
	CORE-ANNEX[facttrans=~, counter-factual=~, possible=+, factual=~](#5,#1)
|NP#1, AP#2|
	if (HEAD2(#3,#1) & HEAD2(#4,#2) & CORE-NOUN(#3) & MOD[pre](#4,?[lemme:currently]) & ^CORE-DRIVE(#5,#3))
	CORE-DRIVE[facttrans=~, counter-factual=~, possible=~, factual=+](#5,#3)
|NP#1, AP#2|
	if (HEAD2(#3,#1) & HEAD2(#4,#2) & CORE-NOUN(#3) & MOD[pre](#4,?[lemme:currently]) & ^CORE-ANNEX(#5,#3))
	CORE-ANNEX[facttrans=~, counter-factual=~, possible=~, factual=+](#5,#3)
// modalité attachée
/
if (^CORE-DRIVE(#1,#2) & CORE-ATT(#1,#2) )
	CORE-DRIVE(#1,#2)

if (^CORE-ANNEX(#1,#2) & CORE-ATT(#1,#2) )
	CORE-ANNEX(#1,#2)
\

if (^CORE-DRIVE[factual](#1,#2) & CORE-ATT[modal](?,#2) )
	CORE-DRIVE[factual=~](#1,#2)

if (^CORE-DRIVE[counter-factual](#1,#2) & CORE-ATT[modal](?,#2) )
	CORE-DRIVE[counter-factual=~](#1,#2)

if (^CORE-ANNEX[factual](#1,#2) & (CORE-ATT[modal](?,#2)) )
	CORE-ANNEX[factual=~](#1,#2)

if (^CORE-ANNEX[counter-factual](#1,#2) & CORE-ATT[modal](?,#2) )
	CORE-ANNEX[counter-factual=~](#1,#2)

if (^CORE-DRIVE[facttrans, identical:~](#1,#2) & CORE-ATT[modal](?,#2) )
	CORE-DRIVE[facttrans=~](#1,#2)

if (^CORE-ANNEX[facttrans, identical:~](#1,#2) & CORE-ATT[modal](?,#2) )
	CORE-ANNEX[facttrans=~](#1,#2)


if (^CORE-DRIVE[say](#1,#2) & CORE-ATT[modal](?,#2) )
	CORE-DRIVE[possible=+](#1,#2)

if (^CORE-DRIVE[deny](#1,#2) & CORE-ATT[modal](?,#2) )
	CORE-DRIVE[possible=+, say=+, deny=~](#1,#2)



// 3. application des rÃ¨gles
//3.a traitement des CORE non dépendant d'une relation DRIVE ou ANNEX

// les événements dont la source n'est pas exprimée par un emboîtement (ex. according to)



//le PP est rattaché (MOD) au verbe, ou n'a pas de rattachement
if (CORE[main](#1) & PREPD(#2,#3[say]) & (MOD(#1,#2)|~MOD(?,#2)))
	SRC[factual=+](#1,#2)


//le PP est rattaché Ã  un CORE emboîté => il qualifie sans doute le verbe principal
if (CORE[main](#1) & PREPD(#2,#3[say]) & MOD(#4[nfin],#2))
	SRC[factual=+](#1,#2)

// adverbes (purportedly)
if (CORE[main](#1) & (MOD(#1,?[adv,say]) | MANNER(#1,?[adv,say]) ) & ~SRC(#1,?))
	SRC[factual=+](#1,##noun[lemme=SOURCE])

// pb d'analyse : le CORE n'est ni verbe principal, ni rattaché Ã  un autre CORE
//=> factuel si c'est un verbe fini
if (CORE[main:~](#1) & ~CORE-DRIVE(?,#1) & ~CORE-ANNEX(?,#1) & HEAD2(#1[nfin:~],?[fin]) & PREPD(#2,#3[say]) & (MOD(#1,#2)|~MOD(?,#2)) & ~SRC(#1,?))
	SRC[factual=+](#1,#2)


if (CORE[main:~](#1) & ~CORE-DRIVE(?,#1) & ~CORE-ANNEX(?,#1) & PREPD(#2,#3[say]) & (MOD(#1,#2)|~MOD(?,#2)) & ~SRC(#1,?))
	SRC[possible=+](#1,#2)

// les événements sans source exprimée
if (CORE[main](#1) & ~SRC(#1,?))
	SRC[factual=+](#1,##noun[lemme=0])

if (CORE[main:~](#1) & ~CORE-DRIVE(?,#1) & ~CORE-ANNEX(?,#1) & HEAD2(#1[nfin:~],?[fin]) & ~SRC(#1,?) )
	SRC[factual=+](#1,##noun[lemme=0])


if (CORE[main:~](#1[cont-act:~]) & ~CORE-DRIVE(?,#1) & ~CORE-ANNEX(?,#1) & ~SRC(#1,?)  & ~NUCL[vlink,progress](?,#1) )
	SRC[possible=+](#1,##noun[lemme=0])

// phrases nominales
if (CORE-NOUN(#1) & ~CORE-DRIVE(#2,#1) & ~CORE-ANNEX(#2,#1) & ~SRC(#1,?))
	SRC[possible=+](#1,##noun[lemme=0])

// correction de la factualité par la négation et la modalité attachée (COREs indépendants)

if (^SRC[factual](#1,#2) & (CORE-ATT[neg](?,#1)| MOD[neg](#1,?)))
	SRC[factual=~, counter-factual=+, neg=+](#1,#2)

if (^SRC[counter-factual, neg:~](#1,#2) & MOD[neg](#1,?))
	SRC[counter-factual=~, factual=+, neg=+](#1,#2)


if (^SRC[factual](#1,#2) & CORE-ATT[modal](?,#1))
	SRC[factual=~, possible=+](#1,#2)

if (^SRC[counter-factual](#1,#2) & CORE-ATT[modal](?,#1))
	SRC[counter-factual=~, possible=+](#1,#2)

//3.b traitement des CORE dépendants

//La série de rÃ¨gles est répétée pour traiter les emboîtements successifs

//1e série


if (SRC(#1,#2))
	DONE(#1,#2)



if ((CORE-DRIVE[second:~, identical](#1,#2) | CORE-ANNEX[second:~, identical](#1,#2)) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC[factual=+](#2,#3)

if ((CORE-DRIVE[second:~, identical](#1,#2) | CORE-ANNEX[second:~, identical](#1,#2)) & SRC[counter-factual](#1,#3) & ~DONE(#2,?))
	SRC[counter-factual=+](#2,#3)

if ((CORE-DRIVE[second:~, identical](#1,#2) | CORE-ANNEX[second:~, identical](#1,#2)) & SRC[possible](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3)

if ((CORE-DRIVE[second:~,facttrans](#1,#2) | CORE-ANNEX[second:~, facttrans](#1,#2)) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC[factual=+](#2,#3)

if ((CORE-DRIVE[second:~,facttrans](#1,#2) | CORE-ANNEX[second:~, facttrans](#1,#2)) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3)

if (CORE-DRIVE[second:~, say, possible:~](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC[factual=+](#2,#4).

if (CORE-DRIVE[second:~, say, possible](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC[possible=+](#2,#4).


if (CORE-DRIVE[second:~,say](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3).


if (CORE-DRIVE[second:~,deny](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC[counter-factual=+](#2,#4).

if (CORE-DRIVE[second:~,deny](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3).

if ((CORE-DRIVE[second:~,factual](#1,#2)| CORE-ANNEX[second:~, factual](#1,#2)) & SRC(#1,#3) & ~DONE(#2,?))
	SRC[factual=+](#2,#3).

if ((CORE-DRIVE[second:~, counter-factual](#1,#2)| CORE-ANNEX[second:~, counter-factual](#1,#2)) & SRC(#1,#3) & ~DONE(#2,?))
	SRC[counter-factual=+](#2,#3).

if ((CORE-DRIVE[second:~, say:~, facttrans:~, factual:~, counter-factual:~](#1,#2) |CORE-ANNEX[second:~, say:~, facttrans:~, factual:~, counter-factual:~](#1,#2) ) & SRC(#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3).

// le cas des relatives et gérondifs dont l'antécédent est un nom d'événement
if ((CORE-DRIVE[second, identical](#1,#2) | CORE-ANNEX[identical](#1,#2)) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC2[factual=+](#2,#3)


if ((CORE-DRIVE[second, identical](#1,#2) | CORE-ANNEX[identical](#1,#2)) & SRC[counter-factual](#1,#3) & ~DONE(#2,?))
	SRC2[counter-factual=+](#2,#3)

if ((CORE-DRIVE[second, identical](#1,#2) | CORE-ANNEX[identical](#1,#2)) & SRC[possible](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3)

if (CORE-DRIVE[second,facttrans](#1,#2) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC2[factual=+](#2,#3)

if (CORE-DRIVE[second,facttrans](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3)

if (CORE-DRIVE[second, say, possible:~](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC2[factual=+](#2,#4).

if (CORE-DRIVE[second, say, possible](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC2[possible=+](#2,#4).

if (CORE-DRIVE[second,say](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3).

if (CORE-DRIVE[second,deny](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC2[counter-factual=+](#2,#4).

if (CORE-DRIVE[second,deny](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3).

if (CORE-DRIVE[second, factual](#1,#2) & SRC(#1,#3) & ~DONE(#2,?))
	SRC2[factual=+](#2,#3).

if (CORE-DRIVE[second, counter-factual](#1,#2) & SRC(#1,#3) & ~DONE(#2,?))
	SRC2[counter-factual=+](#2,#3).

if (CORE-DRIVE[second, say:~, facttrans:~, factual:~, counter-factual:~](#1,#2)  & SRC(#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3).

//2e série

if (SRC(#1,#2))
	DONE(#1,#2)


if ((CORE-DRIVE[second:~, identical](#1,#2) | CORE-ANNEX[second:~, identical](#1,#2)) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC[factual=+](#2,#3)

if ((CORE-DRIVE[second:~, identical](#1,#2) | CORE-ANNEX[second:~, identical](#1,#2)) & SRC[counter-factual](#1,#3) & ~DONE(#2,?))
	SRC[counter-factual=+](#2,#3)

if ((CORE-DRIVE[second:~, identical](#1,#2) | CORE-ANNEX[second:~, identical](#1,#2)) & SRC[possible](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3)

if ((CORE-DRIVE[second:~,facttrans](#1,#2) | CORE-ANNEX[second:~, facttrans](#1,#2)) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC[factual=+](#2,#3)

if ((CORE-DRIVE[second:~,facttrans](#1,#2) | CORE-ANNEX[second:~, facttrans](#1,#2)) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3)

if (CORE-DRIVE[second:~, say, possible:~](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC[factual=+](#2,#4).

if (CORE-DRIVE[second:~, say, possible](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC[possible=+](#2,#4).


if (CORE-DRIVE[second:~,say](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3).


if (CORE-DRIVE[second:~,deny](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC[counter-factual=+](#2,#4).

if (CORE-DRIVE[second:~,deny](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3).

if ((CORE-DRIVE[second:~,factual](#1,#2)| CORE-ANNEX[second:~, factual](#1,#2)) & SRC(#1,#3) & ~DONE(#2,?))
	SRC[factual=+](#2,#3).

if ((CORE-DRIVE[second:~, counter-factual](#1,#2)| CORE-ANNEX[second:~, counter-factual](#1,#2)) & SRC(#1,#3) & ~DONE(#2,?))
	SRC[counter-factual=+](#2,#3).

if ((CORE-DRIVE[second:~, say:~, facttrans:~, factual:~, counter-factual:~](#1,#2) |CORE-ANNEX[second:~, say:~, facttrans:~, factual:~, counter-factual:~](#1,#2) ) & SRC(#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3).


// le cas des relatives et gérondifs dont l'antécédent est un nom d'événement
if ((CORE-DRIVE[second, identical](#1,#2) | CORE-ANNEX[identical](#1,#2)) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC2[factual=+](#2,#3)

if ((CORE-DRIVE[second, identical](#1,#2) | CORE-ANNEX[identical](#1,#2)) & SRC[counter-factual](#1,#3) & ~DONE(#2,?))
	SRC2[counter-factual=+](#2,#3)

if ((CORE-DRIVE[second, identical](#1,#2) | CORE-ANNEX[identical](#1,#2)) & SRC[possible](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3)

if (CORE-DRIVE[second,facttrans](#1,#2) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC2[factual=+](#2,#3)

if (CORE-DRIVE[second,facttrans](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3)

if (CORE-DRIVE[second, say, possible:~](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC2[factual=+](#2,#4).

if (CORE-DRIVE[second, say, possible](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC2[possible=+](#2,#4).

if (CORE-DRIVE[second,say](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3).

if (CORE-DRIVE[second,deny](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC2[counter-factual=+](#2,#4).

if (CORE-DRIVE[second,deny](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3).

if (CORE-DRIVE[second, factual](#1,#2) & SRC(#1,#3) & ~DONE(#2,?))
	SRC2[factual=+](#2,#3).

if (CORE-DRIVE[second, counter-factual](#1,#2) & SRC(#1,#3) & ~DONE(#2,?))
	SRC2[counter-factual=+](#2,#3).

if (CORE-DRIVE[second, say:~, facttrans:~, factual:~, counter-factual:~](#1,#2)  & SRC(#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3).

//3e série

if (SRC(#1,#2))
	DONE(#1,#2)


if ((CORE-DRIVE[second:~, identical](#1,#2) | CORE-ANNEX[second:~, identical](#1,#2)) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC[factual=+](#2,#3)

if ((CORE-DRIVE[second:~, identical](#1,#2) | CORE-ANNEX[second:~, identical](#1,#2)) & SRC[counter-factual](#1,#3) & ~DONE(#2,?))
	SRC[counter-factual=+](#2,#3)

if ((CORE-DRIVE[second:~, identical](#1,#2) | CORE-ANNEX[second:~, identical](#1,#2)) & SRC[possible](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3)

if ((CORE-DRIVE[second:~,facttrans](#1,#2) | CORE-ANNEX[second:~, facttrans](#1,#2)) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC[factual=+](#2,#3)

if ((CORE-DRIVE[second:~,facttrans](#1,#2) | CORE-ANNEX[second:~, facttrans](#1,#2)) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3)

if (CORE-DRIVE[second:~, say, possible:~](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC[factual=+](#2,#4).

if (CORE-DRIVE[second:~, say, possible](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC[possible=+](#2,#4).


if (CORE-DRIVE[second:~,say](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3).


if (CORE-DRIVE[second:~,deny](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC[counter-factual=+](#2,#4).

if (CORE-DRIVE[second:~,deny](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3).

if ((CORE-DRIVE[second:~,factual](#1,#2)| CORE-ANNEX[second:~, factual](#1,#2)) & SRC(#1,#3) & ~DONE(#2,?))
	SRC[factual=+](#2,#3).

if ((CORE-DRIVE[second:~, counter-factual](#1,#2)| CORE-ANNEX[second:~, counter-factual](#1,#2)) & SRC(#1,#3) & ~DONE(#2,?))
	SRC[counter-factual=+](#2,#3).

if ((CORE-DRIVE[second:~, say:~, facttrans:~, factual:~, counter-factual:~](#1,#2) |CORE-ANNEX[second:~, say:~, facttrans:~, factual:~, counter-factual:~](#1,#2) ) & SRC(#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3).

// le cas des relatives et gérondifs dont l'antécédent est un nom d'événement
if ((CORE-DRIVE[second, identical](#1,#2) | CORE-ANNEX[identical](#1,#2)) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC2[factual=+](#2,#3)

if ((CORE-DRIVE[second, identical](#1,#2) | CORE-ANNEX[identical](#1,#2)) & SRC[counter-factual](#1,#3) & ~DONE(#2,?))
	SRC2[counter-factual=+](#2,#3)

if ((CORE-DRIVE[second, identical](#1,#2) | CORE-ANNEX[identical](#1,#2)) & SRC[possible](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3)

if (CORE-DRIVE[second,facttrans](#1,#2) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC2[factual=+](#2,#3)

if (CORE-DRIVE[second,facttrans](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3)

if (CORE-DRIVE[second, say, possible:~](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC2[factual=+](#2,#4).

if (CORE-DRIVE[second, say, possible](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC2[possible=+](#2,#4).

if (CORE-DRIVE[second,say](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3).

if (CORE-DRIVE[second,deny](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC2[counter-factual=+](#2,#4).

if (CORE-DRIVE[second,deny](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3).

if (CORE-DRIVE[second, factual](#1,#2) & SRC(#1,#3) & ~DONE(#2,?))
	SRC2[factual=+](#2,#3).

if (CORE-DRIVE[second, counter-factual](#1,#2) & SRC(#1,#3) & ~DONE(#2,?))
	SRC2[counter-factual=+](#2,#3).

if (CORE-DRIVE[second, say:~, facttrans:~, factual:~, counter-factual:~](#1,#2)  & SRC(#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3).

//4e série

if (SRC(#1,#2))
	DONE(#1,#2)


if ((CORE-DRIVE[second:~, identical](#1,#2) | CORE-ANNEX[second:~, identical](#1,#2)) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC[factual=+](#2,#3)

if ((CORE-DRIVE[second:~, identical](#1,#2) | CORE-ANNEX[second:~, identical](#1,#2)) & SRC[counter-factual](#1,#3) & ~DONE(#2,?))
	SRC[counter-factual=+](#2,#3)

if ((CORE-DRIVE[second:~, identical](#1,#2) | CORE-ANNEX[second:~, identical](#1,#2)) & SRC[possible](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3)

if ((CORE-DRIVE[second:~,facttrans](#1,#2) | CORE-ANNEX[second:~, facttrans](#1,#2)) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC[factual=+](#2,#3)

if ((CORE-DRIVE[second:~,facttrans](#1,#2) | CORE-ANNEX[second:~, facttrans](#1,#2)) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3)

if (CORE-DRIVE[second:~, say, possible:~](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC[factual=+](#2,#4).

if (CORE-DRIVE[second:~, say, possible](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC[possible=+](#2,#4).


if (CORE-DRIVE[second:~,say](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3).


if (CORE-DRIVE[second:~,deny](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC[counter-factual=+](#2,#4).

if (CORE-DRIVE[second:~,deny](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3).

if ((CORE-DRIVE[second:~,factual](#1,#2)| CORE-ANNEX[second:~, factual](#1,#2)) & SRC(#1,#3) & ~DONE(#2,?))
	SRC[factual=+](#2,#3).

if ((CORE-DRIVE[second:~, counter-factual](#1,#2)| CORE-ANNEX[second:~, counter-factual](#1,#2)) & SRC(#1,#3) & ~DONE(#2,?))
	SRC[counter-factual=+](#2,#3).

if ((CORE-DRIVE[second:~, say:~, facttrans:~, factual:~, counter-factual:~](#1,#2) |CORE-ANNEX[second:~, say:~, facttrans:~, factual:~, counter-factual:~](#1,#2) ) & SRC(#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3).

// le cas des relatives et gérondifs dont l'antécédent est un nom d'événement
if ((CORE-DRIVE[second, identical](#1,#2) | CORE-ANNEX[identical](#1,#2)) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC2[factual=+](#2,#3)

if ((CORE-DRIVE[second, identical](#1,#2) | CORE-ANNEX[identical](#1,#2)) & SRC[counter-factual](#1,#3) & ~DONE(#2,?))
	SRC2[counter-factual=+](#2,#3)

if ((CORE-DRIVE[second, identical](#1,#2) | CORE-ANNEX[identical](#1,#2)) & SRC[possible](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3)

if (CORE-DRIVE[second,facttrans](#1,#2) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC2[factual=+](#2,#3)

if (CORE-DRIVE[second,facttrans](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3)

if (CORE-DRIVE[second, say, possible:~](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC2[factual=+](#2,#4).

if (CORE-DRIVE[second, say, possible](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC2[possible=+](#2,#4).

if (CORE-DRIVE[second,say](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3).

if (CORE-DRIVE[second,deny](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC2[counter-factual=+](#2,#4).

if (CORE-DRIVE[second,deny](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3).

if (CORE-DRIVE[second, factual](#1,#2) & SRC(#1,#3) & ~DONE(#2,?))
	SRC2[factual=+](#2,#3).

if (CORE-DRIVE[second, counter-factual](#1,#2) & SRC(#1,#3) & ~DONE(#2,?))
	SRC2[counter-factual=+](#2,#3).

if (CORE-DRIVE[second, say:~, facttrans:~, factual:~, counter-factual:~](#1,#2)  & SRC(#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3).

//5e série

if (SRC(#1,#2))
	DONE(#1,#2)


if ((CORE-DRIVE[second:~, identical](#1,#2) | CORE-ANNEX[second:~, identical](#1,#2)) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC[factual=+](#2,#3)

if ((CORE-DRIVE[second:~, identical](#1,#2) | CORE-ANNEX[second:~, identical](#1,#2)) & SRC[counter-factual](#1,#3) & ~DONE(#2,?))
	SRC[counter-factual=+](#2,#3)

if ((CORE-DRIVE[second:~, identical](#1,#2) | CORE-ANNEX[second:~, identical](#1,#2)) & SRC[possible](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3)

if ((CORE-DRIVE[second:~,facttrans](#1,#2) | CORE-ANNEX[second:~, facttrans](#1,#2)) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC[factual=+](#2,#3)

if ((CORE-DRIVE[second:~,facttrans](#1,#2) | CORE-ANNEX[second:~, facttrans](#1,#2)) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3)

if (CORE-DRIVE[second:~, say, possible:~](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC[factual=+](#2,#4).

if (CORE-DRIVE[second:~, say, possible](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC[possible=+](#2,#4).


if (CORE-DRIVE[second:~,say](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3).


if (CORE-DRIVE[second:~,deny](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC[counter-factual=+](#2,#4).

if (CORE-DRIVE[second:~,deny](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3).

if ((CORE-DRIVE[second:~,factual](#1,#2)| CORE-ANNEX[second:~, factual](#1,#2)) & SRC(#1,#3) & ~DONE(#2,?))
	SRC[factual=+](#2,#3).

if ((CORE-DRIVE[second:~, counter-factual](#1,#2)| CORE-ANNEX[second:~, counter-factual](#1,#2)) & SRC(#1,#3) & ~DONE(#2,?))
	SRC[counter-factual=+](#2,#3).

if ((CORE-DRIVE[second:~, say:~, facttrans:~, factual:~, counter-factual:~](#1,#2) |CORE-ANNEX[second:~, say:~, facttrans:~, factual:~, counter-factual:~](#1,#2) ) & SRC(#1,#3) & ~DONE(#2,?))
	SRC[possible=+](#2,#3).

// le cas des relatives et gérondifs dont l'antécédent est un nom d'événement
if ((CORE-DRIVE[second, identical](#1,#2) | CORE-ANNEX[identical](#1,#2)) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC2[factual=+](#2,#3)

if ((CORE-DRIVE[second, identical](#1,#2) | CORE-ANNEX[identical](#1,#2)) & SRC[counter-factual](#1,#3) & ~DONE(#2,?))
	SRC2[counter-factual=+](#2,#3)

if ((CORE-DRIVE[second, identical](#1,#2) | CORE-ANNEX[identical](#1,#2)) & SRC[possible](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3)

if (CORE-DRIVE[second,facttrans](#1,#2) & SRC[factual](#1,#3) & ~DONE(#2,?))
	SRC2[factual=+](#2,#3)

if (CORE-DRIVE[second,facttrans](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3)

if (CORE-DRIVE[second, say, possible:~](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC2[factual=+](#2,#4).

if (CORE-DRIVE[second, say, possible](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC2[possible=+](#2,#4).

if (CORE-DRIVE[second,say](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3).

if (CORE-DRIVE[second,deny](#1,#2) & SRC[factual](#1,#3) & COORDINATE[actor](#1,#4) & ~DONE(#2,?))
	SRC2[counter-factual=+](#2,#4).

if (CORE-DRIVE[second,deny](#1,#2) & SRC[factual:~](#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3).

if (CORE-DRIVE[second, factual](#1,#2) & SRC(#1,#3) & ~DONE(#2,?))
	SRC2[factual=+](#2,#3).

if (CORE-DRIVE[second, counter-factual](#1,#2) & SRC(#1,#3) & ~DONE(#2,?))
	SRC2[counter-factual=+](#2,#3).

if (CORE-DRIVE[second, say:~, facttrans:~, factual:~, counter-factual:~](#1,#2)  & SRC(#1,#3) & ~DONE(#2,?))
	SRC2[possible=+](#2,#3).


if (^DONE(#1,#2))
	~

//3.c traitement des cas oÃ¹ les CORE qui n'ont pas pu recevoir de factualité (dÃ» Ã  des erreurs dans l'établissement des CORE-DRIVE et CORE-ANNEX)


// les CORE qui n'ont pas pu recevoir de factualité (dÃ» Ã  des erreurs dans l'établissement des CORE-DRIVE et CORE-ANNEX)
if (CORE(#1) & ~SRC(#1,?) & NUCL[vlink,progress](?,#1) )
	SRC[factual=+](#1,##noun[lemme=0])


//if (CORE(#1[cont-act]) & ~SRC(#1,?))
//	SRC[factual=+](#1,##noun[lemme=0])


if (CORE(#1) & ~SRC(#1,?))
	SRC[possible=+](#1,##noun[lemme=0])



// ajout d'une seconde source
//X denies Y's allegation that P
// SRC[factual](P,Y) et SRC[counter-factual](P,X)
if ((CORE-DRIVE(#1[lemme:deny],#2) |CORE-DRIVE(#1[lemme:refute],#2) ) & (CORE-DRIVE[say](#2,#3) | CORE-DRIVE[deny](#2,#3)) & COORDINATE[actor](#1,#4))
	SRC[counter-factual=+](#3,#4)

// cas des relatives et gérondifs dont l'antécédent est un nom d'événement : comparaison des deux sources de factualité
if ((SRC[factual](#1,?)|SRC[counter-factual](#1,?)) & ^SRC2[possible](#1,?))
	~

if (SRC2[factual](#1,?) & ^SRC[possible](#1,#2))
	SRC[factual=+, possible=~](#1,#2)

if (SRC2[counter-factual](#1,?) & ^SRC[possible](#1,#2))
	SRC[counter-factual=+, possible=~](#1,#2)

if (^SRC2[factual](#1,#2) & SRC[counter-factual](#1,#3))
	SRC(#1,#2)

if (^SRC2[counter-factual](#1,#2) & SRC[factual](#1,#3))
	SRC(#1,#2)

if (^SRC2(?,?))
	~

// transmission de la source et de la factualité aux événements identiques : attributs du sujet, adjectifs prédicatifs
//(par sécurité : normalement les régÃ¨les précédentes ont dÃ» meur attribuer la même factualité)

if (CORE-DRIVE[identical](#1,#2) & SRC[factual](#1,#3) & ^SRC(#2,?))
	SRC[factual=+, possible=~, counter-factual=~](#2,#3)

if (CORE-DRIVE[identical](#1,#2)  & SRC[possible](#1,#3) & ^SRC(#2,?))
	SRC[factual=~, possible=+, counter-factual=~](#2,#3)

if (CORE-DRIVE[identical](#1,#2) & SRC[counter-factual](#1,#3) & ^SRC(#2,?))
	SRC[factual=~, possible=~, counter-factual=+](#2,#3)






